<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC 
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
	<include file="struts-default.xml" />
	 
	<constant name="struts.devMode" value="true"/>
	
	<constant name="struts.enable.SlashesInActionNames" value="true"/> 
	
	<constant name="struts.mapper.class" value="org.apache.struts2.dispatcher.mapper.Restful2ActionMapper" />
	
	<package name="banda" extends="struts-default">
		<interceptors>
			<interceptor name="messagePresenterInterceptor" class="com.bandManager.interceptor.MessagePresenterInterceptor" />
			<interceptor-stack name="default">
				<interceptor-ref name="defaultStack"/>
				<interceptor-ref name="messagePresenterInterceptor"/>
			</interceptor-stack>
		</interceptors>
		
		<action name="novaBanda" class="com.bandManager.action.banda.BandaCRUDAction" method="criar">
			<result>banda-editar.page</result>
		</action>
		
		<action name="editarBanda" class="com.bandManager.action.banda.BandaCRUDAction" method="recuperar">
			<result>banda-editar.page</result>
		</action>
		 
		<action name="editarLancamentos" class="com.bandManager.action.banda.BandaCRUDAction" method="recuperar">
		 	<result>banda-lancamentos.page</result>
		</action>
		 
		<action name="salvarBanda" class="com.bandManager.action.banda.BandaCRUDAction" method="salvar">
			<result type="redirectAction">
				<param name="actionName">editarBanda?banda.id=%{banda.id}</param>
			</result>
		</action>
		 
		<action name="adicionarLogo" class="com.bandManager.action.banda.BandaUploadArquivosAction" method="adicionarLogo">
			<result type="redirectAction">
				<param name="actionName">editarBanda?banda.id=%{banda.id}</param>
			</result>
			
			<result name="error" type="redirectAction">
				<param name="actionName">editarBanda?banda.id=%{banda.id}</param>
			</result>
		</action>
		 
		 <action name="excluirLogo" class="com.bandManager.action.banda.BandaUploadArquivosAction" method="excluirLogo">
			<result type="redirectAction">
				<param name="actionName">editarBanda?banda.id=%{banda.id}</param>
			</result>
		 </action>
		 
		 <action name="adicionarFoto" class="com.bandManager.action.banda.BandaUploadArquivosAction" method="adicionarFoto">
			<result type="redirectAction">
				<param name="actionName">editarBanda?banda.id=%{banda.id}</param>
			</result>
			
			<result name="error" type="redirectAction">
				<param name="actionName">editarBanda?banda.id=%{banda.id}</param>
			</result>
		 </action>
		 
		 <action name="excluirFoto" class="com.bandManager.action.banda.BandaUploadArquivosAction" method="excluirFoto">
			<result type="redirectAction">
				<param name="actionName">editarBanda?banda.id=%{banda.id}</param>
			</result>
		 </action>
	</package>
	
	<package name="lancamento" extends="struts-default">
		<action name="adicionarLancamento" class="com.bandManager.action.lancamento.LancamentoCRUDAction" method="recuperar">
			<result>lancamento-editar.page</result>
		</action>

		<action name="editarLancamento" class="com.bandManager.action.lancamento.LancamentoCRUDAction" method="recuperar">
			<result>lancamento-editar.page</result>
		</action>
				
		<action name="salvarLancamento" class="com.bandManager.action.lancamento.LancamentoCRUDAction" method="salvar">
			<result type="redirect">editarLancamento?banda.id=%{banda.id}&amp;lancamento.id=%{lancamento.id}</result>
		</action>
		
		<action name="excluirLancamento" class="com.bandManager.action.lancamento.LancamentoCRUDAction" method="excluir">
			<result type="redirect">editarLancamentos?banda.id=%{banda.id}</result>
		</action>
		
		<action name="adicionarCapa" class="com.bandManager.action.lancamento.LancamentoUploadArquivosAction" method="adicionarCapa">
			<result type="redirect">editarLancamento?banda.id=%{banda.id}&amp;lancamento.id=%{lancamento.id}</result>
		</action>
		
		<action name="excluirCapa" class="com.bandManager.action.lancamento.LancamentoUploadArquivosAction" method="excluirCapa">
			<result type="redirect">editarLancamento?banda.id=${banda.id}&amp;lancamento.id=${lancamento.id}</result>
		</action>
	</package>
	
	<package name="musica" extends="struts-default">
		<action name="adicionarMusica" class="com.bandManager.action.musica.MusicaCRUDAction" method="recuperar">
			<result>musica-editar.page</result>
		</action>
		
		<action name="editarMusica" class="com.bandManager.action.musica.MusicaCRUDAction" method="recuperar">
			<result>musica-editar.page</result>
		</action>
		
		<action name="excluirMusica" class="com.bandManager.action.musica.MusicaCRUDAction" method="excluir">
			<result type="redirectAction">
				<param name="actionName">editarLancamento?banda.id=%{banda.id}&amp;lancamento.id=%{lancamento.id}</param>
			</result>
		</action>
		
		<action name="salvarMusica" class="com.bandManager.action.musica.MusicaCRUDAction" method="salvar">
			<result type="redirectAction">
				<param name="actionName">editarMusica?banda.id=%{banda.id}&amp;lancamento.id=%{lancamento.id}&amp;musica.id=%{musica.id}</param>
			</result>
		</action>
		
		<action name="adicionarArquivoAudio" class="com.bandManager.action.musica.MusicaUploadArquivosAction" method="adicionarArquivoAudio">
			<result type="redirectAction">
				<param name="actionName">editarMusica?banda.id=%{banda.id}&amp;lancamento.id=%{lancamento.id}&amp;musica.id=%{musica.id}</param>
			</result>
		</action>
		
		<action name="excluirArquivoAudio" class="com.bandManager.action.musica.MusicaUploadArquivosAction" method="excluirArquivoAudio">
			<result type="redirectAction">
				<param name="actionName">editarMusica?banda.id=%{banda.id}&amp;lancamento.id=%{lancamento.id}&amp;musica.id=%{musica.id}</param>
			</result>
		</action>		
	</package>
	
	<package name="show" extends="struts-default">
		<action name="novoShow" class="com.bandManager.action.show.ShowCRUDAction" method="criar">
			<result>show-editar.page</result>
		</action>
		
		<action name="editarShow" class="com.bandManager.action.show.ShowCRUDAction" method="recuperar">
			<result>show-editar.page</result>
		</action>
		
		<action name="salvarShow" class="com.bandManager.action.show.ShowCRUDAction" method="salvar">
			<result type="redirectAction">
				<param name="actionName">editarShow?banda.id=%{banda.id}&amp;show.id=%{show.id}</param>
			</result>
		</action>
		
		<action name="excluirShow" class="com.bandManager.action.show.ShowCRUDAction" method="excluir">
			<result type="redirect">editarLancamentos?banda.id=%{banda.id}</result>
		</action>
	</package>
</struts>
